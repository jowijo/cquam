gr-cquam
=====

AM Stereo flowgraph for GNURadio. Implementation of Motorola's CQUAM standard for AM Stereo transmission in GNURadio. The flowgraph uses native blocks, and requires no extra dependancies.
##What's Here?
* **cquam.grc** -- The main attraction. A GRC flowgraph of an AM Stereo transmitter per the C-QUAM standard.
* **mw.sts (optional)** -- Optimised preset for the Stereo Tool processor for use in the CQUAM transmitter. (See "Usage").

##Usage
The defaul configuration takes audio samples from a FIFO. An example of sending music to the transmitter is below:
```
mpg123 -s http://127.0.0.1:8000 | ./stc - - -s mw.sts > /tmp/play
```

..to test without mpd or another local source, simply subsitute the stream with any online feed (http://somafm.com/):
```
mpg123 -s http://maxxima.mine.nu:8000 | ./stc - - -s mw.sts > /tmp/play
```

* mpg123 plays my mpd stream.
* ./stc is my audio processor, Stereo Tool (http://www.stereotool.com/). This is optional.
* '/tmp/play' is the named pipe which will send the audio data to the transmitter.

In any case, most audio programs that run in a command-line should put out valid (PCM) samples; so long as they a piped through '/tmp/play'. Alternatively, you can replace the file block with an audio block for ALSA or JACK input, but bear in mind JACK does not support Stereo input, and ALSA is often slow and impairs performance. 

The signal generated by the graph is a baseband C-QUAM signal. Simply attaching the virtual device to the UHD or osmosdr block with proper parameters shold produce a proper signal for testing. This was tested on a BladeRF and worked. The WAV dump of the generated signal was tested in SoDiRa software, and played as intended.

For FM, you will have two audio sources. e.g /tmp/play, and /tmp/play_sca.

##Playback/Transmit
The signal should work on any AM Stereo/CQUAM reciever.

You can listen to the WAV files generated by the flowgraph or transmit to an AM Stereo reciever. To decode C-QUAM on your PC however, you'll needs the non-free SoDiRa (has a demo version). Select "AM Radio" from the dropdown, click "Debug", and select "Stereo (CQUAM)".
